profiles {
  docker {
    docker.enabled = true
    process.container = 'agabriel/epicatac_main_analyses:v1.0'
  }
  singularity {
    singularity.enabled = true
    singularity.autoMounts = true
    process.container = 'docker://agabriel/epicatac_main_analyses:v1.0'
    singularity.runOptions = '--bind /scratch,/work'
  }
}

trace.overwrite=true
report.overwrite=true
timeline.overwrite=true
dag.overwrite=true


process.executor = 'slurm'
process {
  errorStrategy = 'retry'
  maxRetries = { task.exitStatus == 137 ? 20 : 1 }
  memory = { task.exitStatus == 137 ? 10.GB * task.attempt : 8.GB }
}
timeline {
  enabled = true
  file = "nf-pipeline_info/EPIC-ATAC_timeline.html"
}

report {
  enabled = true
  file = "nf-pipeline_info/EPIC-ATAC_report.html"
}

trace {
  enabled = true
  file = "nf-pipeline_info/EPIC-ATAC_trace.txt"
}

dag {
  enabled = true
  file = "nf-pipeline_info/EPIC-ATAC_dag.html"
}
